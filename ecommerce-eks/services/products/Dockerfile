# services/products/Dockerfile
FROM python:3.12-slim
RUN useradd -m app
WORKDIR /app
COPY pyproject.toml ./
RUN pip install --no-cache-dir fastapi "uvicorn[standard]"
COPY app ./app
USER app
EXPOSE 8000
HEALTHCHECK --interval=30s --timeout=3s CMD curl -fsS http://localhost:8000/health || exit 1
CMD ["python","-m","uvicorn","app.main:app","--host","0.0.0.0","--port","8000"]